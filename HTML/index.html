<!doctype html>
<html>
   <head>
      <meta charset="UTF-8">
      <title>Kysely v0.05</title>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
      <link rel="stylesheet" type="text/css" href="style.css">
      <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

       <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-86715488-1', 'auto');
  ga('send', 'pageview');

</script>

   </head>
   <body>
      <div class="container">
         <h1>How are you today?</h1>
         <form>
             <div id="get-kysymys">
             </div>
            <!-- Template-vastausvaihtoehdot -->
             <div id="question" class="hidden">
               <div class="hymyt">
                  <label><input type="radio" name="null" value="erinomainen" /><img src="uudethymiot/erinomainen.png" alt="erinomainen" height="148" width="145"><span>Excellent</span></label>
                  <label><input type="radio" name="null" value="hyvä"  /><img src="uudethymiot/hyva.png" alt="hyvä" height="148" width="145"><span>Good</span></label>
                  <label><input type="radio" name="null" value="korjattavaa" /><img src="uudethymiot/korjattavaa.png" alt="korjattavaa" height="148" width="145"><span>Needs fixing</span></label>
                  <label><input type="radio" name="null" value="huono"/><img src="uudethymiot/huono.png" alt="huono" height="148" width="145"><span>Bad</span></label>
               </div>
             </div>
                    <input type="submit" class="btn btn-primary" value="Lähetä">
         </form>
      </div>

      <script type="text/javascript">
         $(document).ready(function () {
              $.getJSON( "http://proto432.haaga-helia.fi:8080/notet/questions/", function( data ) {
                   $.each(data, function(key, value) {
                        //Luodaan div kysymykselle
                        var kysymys = $("<div class='question'/>").appendTo("#get-kysymys");

                        //Kysymysnumero + kysymysteksti
                        $("<h2/>").text(value.id + ". " + value.text).appendTo(kysymys);

                        //Vastausvaihtoehdot
                        var template = $('#question div').clone();
                        $(template).find('input:radio').attr('name', value.id);
                        $(template).find("label").on('click', goToNextQuestion);
                        $(template).appendTo(kysymys);
                     });
                 })
		     });

             // Scroll-efekti
            function goToNextQuestion(event) {
                console.log($(event.target));
                // ettii painetun napin parentin seuraavan sisaruksen jolla on luokka question
                var nextSibling = $(event.target).closest('.question').next('.question');
                // hakee sen seuraavan sisaruksen etäisyyden sivun ylälaidast
                var offsetTop = nextSibling.offset().top;
                // animoi liikkumisen tohon etäisyytee
                $('html, body').animate({ scrollTop: offsetTop }, 700);
             }
      </script>
   </body>
</html>